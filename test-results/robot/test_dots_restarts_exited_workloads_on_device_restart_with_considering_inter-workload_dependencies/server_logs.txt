[2025-07-16T15:53:20Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:53:20Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/device_restart_with_dependencies_modified_web_service_init.yaml'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'web_service_init' as no config is assigned to the workload
[2025-07-16T15:53:20Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'filesystem_init' as no config is assigned to the workload
[2025-07-16T15:53:20Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'web_service' as no config is assigned to the workload
[2025-07-16T15:53:20Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:53:20Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:53:20Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:53:20Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:53:20Z INFO  dotops::dots_server] Received AgentHello from 'agent_B'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_B' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_B' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, tags: [], dependencies: {"filesystem_init": AddCondSucceeded}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/sleepy:latest\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:53:20Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, tags: [], dependencies: {"filesystem_init": AddCondSucceeded}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sleep\", \"-e\", \"ENV=TEST\" ]\ncommandArgs: [ \"2\" ]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sleep\" ]\ncommandArgs: [ \"1\" ]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-426bac74-8cc2-4232-88e8-e5b5bc4d7ab5) open.
[2025-07-16T15:53:20Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-426bac74-8cc2-4232-88e8-e5b5bc4d7ab5'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-426bac74-8cc2-4232-88e8-e5b5bc4d7ab5@f9327ea3-d253-430f-964a-9a3f3dcfa89a' and field mask: '[]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-426bac74-8cc2-4232-88e8-e5b5bc4d7ab5) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-426bac74-8cc2-4232-88e8-e5b5bc4d7ab5) has been closed.
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-839d605c-25ad-4f20-b8b1-9f0759f1545c) open.
[2025-07-16T15:53:20Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-839d605c-25ad-4f20-b8b1-9f0759f1545c'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-839d605c-25ad-4f20-b8b1-9f0759f1545c@1b03ac27-3dd6-4e72-8060-e6ab43244127' and field mask: '[]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-839d605c-25ad-4f20-b8b1-9f0759f1545c) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-839d605c-25ad-4f20-b8b1-9f0759f1545c) has been closed.
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f27ad009-b476-4683-8de8-58899e608820) open.
[2025-07-16T15:53:20Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-f27ad009-b476-4683-8de8-58899e608820'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-f27ad009-b476-4683-8de8-58899e608820@65b52fd7-fffe-4059-8006-ac8a2a3a9a14' and field mask: '[]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f27ad009-b476-4683-8de8-58899e608820) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f27ad009-b476-4683-8de8-58899e608820) has been closed.
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-566a45f5-9a96-4e3d-8353-9470e1867dd6) open.
[2025-07-16T15:53:20Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-566a45f5-9a96-4e3d-8353-9470e1867dd6'
[2025-07-16T15:53:20Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-566a45f5-9a96-4e3d-8353-9470e1867dd6@1a8554c1-aaeb-4169-a687-88b690332f6f' and field mask: '[]'
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-566a45f5-9a96-4e3d-8353-9470e1867dd6) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:20Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-566a45f5-9a96-4e3d-8353-9470e1867dd6) has been closed.
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fbad3e3f-7990-4e38-ab65-119804f2489c) open.
[2025-07-16T15:53:21Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-fbad3e3f-7990-4e38-ab65-119804f2489c'
[2025-07-16T15:53:21Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-fbad3e3f-7990-4e38-ab65-119804f2489c@6e6dacfb-30e3-4dae-be56-08c4f51db49f' and field mask: '[]'
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fbad3e3f-7990-4e38-ab65-119804f2489c) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fbad3e3f-7990-4e38-ab65-119804f2489c) has been closed.
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-dc46abcd-4206-42f6-9daf-4659179b647f) open.
[2025-07-16T15:53:21Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-dc46abcd-4206-42f6-9daf-4659179b647f'
[2025-07-16T15:53:21Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-dc46abcd-4206-42f6-9daf-4659179b647f@d2a2b6ab-4067-4f52-ac69-ceda9455d287' and field mask: '[]'
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-dc46abcd-4206-42f6-9daf-4659179b647f) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-dc46abcd-4206-42f6-9daf-4659179b647f) has been closed.
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-6117f29a-4c0f-464b-9760-b0fbf006da96) open.
[2025-07-16T15:53:21Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-6117f29a-4c0f-464b-9760-b0fbf006da96'
[2025-07-16T15:53:21Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-6117f29a-4c0f-464b-9760-b0fbf006da96@4c2a0cfa-27e2-4147-b85b-3fb04088ed2a' and field mask: '[]'
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-6117f29a-4c0f-464b-9760-b0fbf006da96) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-6117f29a-4c0f-464b-9760-b0fbf006da96) has been closed.
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c605b54e-7d15-41e6-b5e4-407457c8b1e0) open.
[2025-07-16T15:53:21Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-c605b54e-7d15-41e6-b5e4-407457c8b1e0'
[2025-07-16T15:53:21Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-c605b54e-7d15-41e6-b5e4-407457c8b1e0@f19e6761-9a39-45db-9a6b-2e344a46b33d' and field mask: '[]'
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c605b54e-7d15-41e6-b5e4-407457c8b1e0) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:21Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c605b54e-7d15-41e6-b5e4-407457c8b1e0) has been closed.
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0d80b46d-6789-4d16-9042-65122eb439a0) open.
[2025-07-16T15:53:22Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-0d80b46d-6789-4d16-9042-65122eb439a0'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-0d80b46d-6789-4d16-9042-65122eb439a0@708afc24-624c-4e29-9dd7-52b767f24592' and field mask: '[]'
[2025-07-16T15:53:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0d80b46d-6789-4d16-9042-65122eb439a0) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0d80b46d-6789-4d16-9042-65122eb439a0) has been closed.
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:53:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f37552f4-dbb1-436d-a64a-532361a556e2) open.
[2025-07-16T15:53:22Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-f37552f4-dbb1-436d-a64a-532361a556e2'
[2025-07-16T15:53:22Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-f37552f4-dbb1-436d-a64a-532361a556e2@848cc0c8-c739-4b2f-9ad5-8f1ef189d1c0' and field mask: '[]'
[2025-07-16T15:53:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f37552f4-dbb1-436d-a64a-532361a556e2) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f37552f4-dbb1-436d-a64a-532361a556e2) has been closed.
