[2025-07-16T15:37:22Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:37:22Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/device_restart_with_dependencies_modified_web_service_init.yaml'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'web_service_init' as no config is assigned to the workload
[2025-07-16T15:37:22Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'filesystem_init' as no config is assigned to the workload
[2025-07-16T15:37:22Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'web_service' as no config is assigned to the workload
[2025-07-16T15:37:22Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:37:22Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:37:22Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:37:22Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:37:22Z INFO  dotops::dots_server] Received AgentHello from 'agent_B'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_B' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_B' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, tags: [], dependencies: {"filesystem_init": AddCondSucceeded}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/sleepy:latest\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:37:22Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, tags: [], dependencies: {"filesystem_init": AddCondSucceeded}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sleep\", \"-e\", \"ENV=TEST\" ]\ncommandArgs: [ \"2\" ]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sleep\" ]\ncommandArgs: [ \"1\" ]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-88afccab-9d80-417a-9a50-406a91c86953) open.
[2025-07-16T15:37:22Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-88afccab-9d80-417a-9a50-406a91c86953'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-88afccab-9d80-417a-9a50-406a91c86953@4896be2f-df4f-4a90-aaa7-63814d137efa' and field mask: '[]'
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-88afccab-9d80-417a-9a50-406a91c86953) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-88afccab-9d80-417a-9a50-406a91c86953) has been closed.
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b543a72b-452f-4a39-8c2e-f994fc39ea3a) open.
[2025-07-16T15:37:22Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-b543a72b-452f-4a39-8c2e-f994fc39ea3a'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-b543a72b-452f-4a39-8c2e-f994fc39ea3a@560eb33c-bbe8-4494-b47b-fb3c00ffe713' and field mask: '[]'
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b543a72b-452f-4a39-8c2e-f994fc39ea3a) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b543a72b-452f-4a39-8c2e-f994fc39ea3a) has been closed.
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4551d655-fe7c-422f-bf14-218ef4a20ed4) open.
[2025-07-16T15:37:22Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-4551d655-fe7c-422f-bf14-218ef4a20ed4'
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-4551d655-fe7c-422f-bf14-218ef4a20ed4@5eeb3252-e34a-4920-8fe9-f24238b00c3c' and field mask: '[]'
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4551d655-fe7c-422f-bf14-218ef4a20ed4) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:22Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4551d655-fe7c-422f-bf14-218ef4a20ed4) has been closed.
[2025-07-16T15:37:22Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:37:23Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-9e6ba71d-4cef-414f-b133-3db5cf9e8614) open.
[2025-07-16T15:37:23Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-9e6ba71d-4cef-414f-b133-3db5cf9e8614'
[2025-07-16T15:37:23Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-9e6ba71d-4cef-414f-b133-3db5cf9e8614@42747b37-a409-4b3b-b1b0-7cb88765715b' and field mask: '[]'
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-9e6ba71d-4cef-414f-b133-3db5cf9e8614) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-9e6ba71d-4cef-414f-b133-3db5cf9e8614) has been closed.
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d9730e8d-f1dc-4da0-b994-94cf88b0239f) open.
[2025-07-16T15:37:23Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d9730e8d-f1dc-4da0-b994-94cf88b0239f'
[2025-07-16T15:37:23Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d9730e8d-f1dc-4da0-b994-94cf88b0239f@dd74bcbb-02fa-4c35-9988-ee8555205e84' and field mask: '[]'
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d9730e8d-f1dc-4da0-b994-94cf88b0239f) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d9730e8d-f1dc-4da0-b994-94cf88b0239f) has been closed.
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-da5feea4-4db7-40f2-a0fe-13ef14fb3ec4) open.
[2025-07-16T15:37:23Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-da5feea4-4db7-40f2-a0fe-13ef14fb3ec4'
[2025-07-16T15:37:23Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-da5feea4-4db7-40f2-a0fe-13ef14fb3ec4@7e456890-67da-4ccf-8528-182140fc05c1' and field mask: '[]'
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-da5feea4-4db7-40f2-a0fe-13ef14fb3ec4) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-da5feea4-4db7-40f2-a0fe-13ef14fb3ec4) has been closed.
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-9ee67b8c-02d9-498c-8219-18abc2d5142e) open.
[2025-07-16T15:37:23Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-9ee67b8c-02d9-498c-8219-18abc2d5142e'
[2025-07-16T15:37:23Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-9ee67b8c-02d9-498c-8219-18abc2d5142e@a5aa6d5d-025a-4af3-af96-8b56393eeac2' and field mask: '[]'
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-9ee67b8c-02d9-498c-8219-18abc2d5142e) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:23Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-9ee67b8c-02d9-498c-8219-18abc2d5142e) has been closed.
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4f2660cd-2f65-4123-af22-2f1ac3fe12fb) open.
[2025-07-16T15:37:24Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-4f2660cd-2f65-4123-af22-2f1ac3fe12fb'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-4f2660cd-2f65-4123-af22-2f1ac3fe12fb@45ad0c5d-b5ec-45b6-9624-2a4ede19dcb2' and field mask: '[]'
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4f2660cd-2f65-4123-af22-2f1ac3fe12fb) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4f2660cd-2f65-4123-af22-2f1ac3fe12fb) has been closed.
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f1b8ff2a-322c-4370-ad8b-b2678334a9e1) open.
[2025-07-16T15:37:24Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-f1b8ff2a-322c-4370-ad8b-b2678334a9e1'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-f1b8ff2a-322c-4370-ad8b-b2678334a9e1@a995790e-618f-444e-b1c7-f7e267e5dd40' and field mask: '[]'
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f1b8ff2a-322c-4370-ad8b-b2678334a9e1) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f1b8ff2a-322c-4370-ad8b-b2678334a9e1) has been closed.
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "filesystem_init", id: "d9fe2b70c967cc790c904afb6663aa7ae4f40d8fd5badf6d6b5858e1b7a81e8f" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "5acb6c4ca6d16724b5bf0a45f443f9e54de7cfb566bcbf6be194f93d9fa31390" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "web_service", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "web_service_init", id: "9b447f571c9335f7c189de4334f39905bbd47da3474be20ae71ae9442e3beb7a" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fd4c04f7-57db-4ad0-982f-f3cff52b66c7) open.
[2025-07-16T15:37:24Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-fd4c04f7-57db-4ad0-982f-f3cff52b66c7'
[2025-07-16T15:37:24Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-fd4c04f7-57db-4ad0-982f-f3cff52b66c7@6eca63e0-e7df-4eab-8322-e969c626a32c' and field mask: '[]'
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fd4c04f7-57db-4ad0-982f-f3cff52b66c7) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:24Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fd4c04f7-57db-4ad0-982f-f3cff52b66c7) has been closed.
