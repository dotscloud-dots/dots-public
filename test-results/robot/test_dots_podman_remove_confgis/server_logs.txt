[2025-07-16T15:52:19Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:52:19Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/default_with_config.yaml'
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello2' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'sleepy' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello1' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello3' as no config is assigned to the workload
[2025-07-16T15:52:19Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:52:19Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:52:19Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:52:19Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:52:19Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ab8c56c3-9ca6-4eaa-9d24-78fd662380b6) open.
[2025-07-16T15:52:19Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-ab8c56c3-9ca6-4eaa-9d24-78fd662380b6'
[2025-07-16T15:52:19Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-ab8c56c3-9ca6-4eaa-9d24-78fd662380b6@7db3be34-0fba-4fba-b346-fbca21e48bed' and field mask: '[]'
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ab8c56c3-9ca6-4eaa-9d24-78fd662380b6) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ab8c56c3-9ca6-4eaa-9d24-78fd662380b6) has been closed.
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-bbf100c5-835e-473f-be92-6e9c2be4972a) open.
[2025-07-16T15:52:19Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-bbf100c5-835e-473f-be92-6e9c2be4972a'
[2025-07-16T15:52:19Z DEBUG grpc::to_server_proxy] Received UpdateStateRequest from 'cli-conn-bbf100c5-835e-473f-be92-6e9c2be4972a'
[2025-07-16T15:52:19Z DEBUG dotops::dots_server] Received UpdateState. State 'CompleteState { desired_state: State { api_version: "v0.1", workloads: {}, configs: {} }, workload_states: WorkloadStatesMap({}), agents: AgentMap({}) }', update mask '["desiredState.configs.config_1"]'
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello1' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello2' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello3' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'sleepy' as no config is assigned to the workload
[2025-07-16T15:52:19Z DEBUG dotops::dots_server] The current state and new state are identical -> nothing to do
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-bbf100c5-835e-473f-be92-6e9c2be4972a) has been closed.
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-784de56d-1849-4c94-8d12-dd21949d98ba) open.
[2025-07-16T15:52:19Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-784de56d-1849-4c94-8d12-dd21949d98ba'
[2025-07-16T15:52:19Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-784de56d-1849-4c94-8d12-dd21949d98ba@1048d108-a2e4-43a4-856c-8890b067c02d' and field mask: '["desiredState.configs"]'
[2025-07-16T15:52:19Z DEBUG dotops::dots_server::server_state] Current state: Object { data: Mapping {"desiredState": Mapping {"apiVersion": String("v0.1"), "workloads": Mapping {"sleepy": Mapping {"agent": String("agent_A"), "restartPolicy": Number(0), "dependencies": Mapping {}, "tags": Sequence [Mapping {"key": String("owner"), "value": String("Dots team")}], "runtime": String("podman"), "runtimeConfig": String("image: dotscloud/sleepy:latest\n"), "controlInterfaceAccess": Null, "configs": Mapping {}, "files": Mapping {"files": Sequence []}}, "hello3": Mapping {"agent": String("agent_B"), "restartPolicy": Number(0), "dependencies": Mapping {}, "tags": Sequence [Mapping {"key": String("owner"), "value": String("Dots team")}], "runtime": String("podman"), "runtimeConfig": String("image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n"), "controlInterfaceAccess": Null, "configs": Mapping {}, "files": Mapping {"files": Sequence []}}, "hello2": Mapping {"agent": String("agent_B"), "restartPolicy": Number(0), "dependencies": Mapping {}, "tags": Sequence [Mapping {"key": String("owner"), "value": String("Dots team")}], "runtime": String("podman"), "runtimeConfig": String("image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n"), "controlInterfaceAccess": Null, "configs": Mapping {}, "files": Mapping {"files": Sequence []}}, "hello1": Mapping {"agent": String("agent_B"), "restartPolicy": Number(0), "dependencies": Mapping {}, "tags": Sequence [Mapping {"key": String("owner"), "value": String("Dots team")}], "runtime": String("podman"), "runtimeConfig": String("image: dotscloud/nginx:latest\ncommandOptions: [ \"--rm\"]\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n"), "controlInterfaceAccess": Null, "configs": Mapping {}, "files": Mapping {"files": Sequence []}}}, "configs": Mapping {"config_2": Mapping {"access_port": String("8081")}}}, "workloadStates": Mapping {"agent_A": Mapping {"sleepy": Mapping {"7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc": Mapping {"additionalInfo": String(""), "pending": Number(0)}}}, "agent_B": Mapping {"hello2": Mapping {"3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e": Mapping {"additionalInfo": String(""), "pending": Number(0)}}, "hello3": Mapping {"3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e": Mapping {"additionalInfo": String(""), "pending": Number(0)}}, "hello1": Mapping {"5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618": Mapping {"additionalInfo": String(""), "pending": Number(0)}}}}, "agents": Null} }
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-784de56d-1849-4c94-8d12-dd21949d98ba) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:19Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-784de56d-1849-4c94-8d12-dd21949d98ba) has been closed.
