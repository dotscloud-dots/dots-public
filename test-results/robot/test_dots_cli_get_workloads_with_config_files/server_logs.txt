[2025-07-16T15:53:45Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:53:45Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/default.yaml'
[2025-07-16T15:53:45Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:53:45Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'sleepy' as no config is assigned to the workload
[2025-07-16T15:53:45Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello1' as no config is assigned to the workload
[2025-07-16T15:53:45Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello3' as no config is assigned to the workload
[2025-07-16T15:53:45Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello2' as no config is assigned to the workload
[2025-07-16T15:53:45Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:53:45Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:53:45Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:53:45Z INFO  dotops::dots_server] Received AgentHello from 'agent_B'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_B' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_B' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--rm\"]\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d12d98ab-94fb-49b7-b902-2ebe7dbb5a59) open.
[2025-07-16T15:53:45Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d12d98ab-94fb-49b7-b902-2ebe7dbb5a59'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d12d98ab-94fb-49b7-b902-2ebe7dbb5a59@7d3c5db8-c8be-4f65-9108-9bdf75240886' and field mask: '[]'
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d12d98ab-94fb-49b7-b902-2ebe7dbb5a59) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d12d98ab-94fb-49b7-b902-2ebe7dbb5a59) has been closed.
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, execution_state: ExecutionState { state: Failed(Lost), additional_info: "" } }]'
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-a692745d-1ae1-44ba-b5ad-7d8e92939347) open.
[2025-07-16T15:53:45Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-a692745d-1ae1-44ba-b5ad-7d8e92939347'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-a692745d-1ae1-44ba-b5ad-7d8e92939347@fd39ccaf-7464-4db6-a7cb-24520939fda1' and field mask: '[]'
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-a692745d-1ae1-44ba-b5ad-7d8e92939347) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-a692745d-1ae1-44ba-b5ad-7d8e92939347) has been closed.
[2025-07-16T15:53:45Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, execution_state: ExecutionState { state: Failed(Lost), additional_info: "" } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/sleepy:latest\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-7dfe0d8f-ad9b-4b2b-aa63-ac1845547435) open.
[2025-07-16T15:53:45Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-7dfe0d8f-ad9b-4b2b-aa63-ac1845547435'
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-7dfe0d8f-ad9b-4b2b-aa63-ac1845547435@9162d416-92be-47ae-9abf-9656b4ce9abf' and field mask: '[]'
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-7dfe0d8f-ad9b-4b2b-aa63-ac1845547435) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:45Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-7dfe0d8f-ad9b-4b2b-aa63-ac1845547435) has been closed.
[2025-07-16T15:53:45Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:46Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-90969801-e76f-441d-a28e-5e6eb189ffbb) open.
[2025-07-16T15:53:46Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-90969801-e76f-441d-a28e-5e6eb189ffbb'
[2025-07-16T15:53:46Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-90969801-e76f-441d-a28e-5e6eb189ffbb@94f13f80-6d68-40a3-a6a3-dbbdd4e6c426' and field mask: '[]'
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-90969801-e76f-441d-a28e-5e6eb189ffbb) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-90969801-e76f-441d-a28e-5e6eb189ffbb) has been closed.
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-10fb018b-d17f-449c-8fc5-4325022deb0f) open.
[2025-07-16T15:53:46Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-10fb018b-d17f-449c-8fc5-4325022deb0f'
[2025-07-16T15:53:46Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-10fb018b-d17f-449c-8fc5-4325022deb0f@7c7d81f6-2485-4efc-8719-f3c82851b6ea' and field mask: '[]'
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-10fb018b-d17f-449c-8fc5-4325022deb0f) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-10fb018b-d17f-449c-8fc5-4325022deb0f) has been closed.
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c84cea77-3573-4b8c-8a26-6c1029fa205b) open.
[2025-07-16T15:53:46Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-c84cea77-3573-4b8c-8a26-6c1029fa205b'
[2025-07-16T15:53:46Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-c84cea77-3573-4b8c-8a26-6c1029fa205b@65188a32-1157-482f-8601-1e96f7c3bc2f' and field mask: '[]'
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c84cea77-3573-4b8c-8a26-6c1029fa205b) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c84cea77-3573-4b8c-8a26-6c1029fa205b) has been closed.
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-61bd1db2-62bd-44fe-9e6c-bfa23fac7f10) open.
[2025-07-16T15:53:46Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-61bd1db2-62bd-44fe-9e6c-bfa23fac7f10'
[2025-07-16T15:53:46Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-61bd1db2-62bd-44fe-9e6c-bfa23fac7f10@0b85020d-0a6f-4ea2-b6cb-f35bee2cfcc3' and field mask: '[]'
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-61bd1db2-62bd-44fe-9e6c-bfa23fac7f10) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-61bd1db2-62bd-44fe-9e6c-bfa23fac7f10) has been closed.
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d5030652-90e0-4ae6-ae7c-692dcdb2c856) open.
[2025-07-16T15:53:46Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d5030652-90e0-4ae6-ae7c-692dcdb2c856'
[2025-07-16T15:53:46Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d5030652-90e0-4ae6-ae7c-692dcdb2c856@5b431619-0464-4891-a8d2-47616073ec6c' and field mask: '[]'
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d5030652-90e0-4ae6-ae7c-692dcdb2c856) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:46Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d5030652-90e0-4ae6-ae7c-692dcdb2c856) has been closed.
