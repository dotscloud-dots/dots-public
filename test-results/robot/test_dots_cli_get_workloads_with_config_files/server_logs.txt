[2025-07-16T15:37:47Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:37:47Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/default.yaml'
[2025-07-16T15:37:47Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:37:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'sleepy' as no config is assigned to the workload
[2025-07-16T15:37:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello2' as no config is assigned to the workload
[2025-07-16T15:37:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello3' as no config is assigned to the workload
[2025-07-16T15:37:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'hello1' as no config is assigned to the workload
[2025-07-16T15:37:47Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:37:47Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:37:47Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:37:47Z INFO  dotops::dots_server] Received AgentHello from 'agent_B'
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_B' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_B' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--rm\"]\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:37:47Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-26b0d618-2ef8-4dcc-a01a-90be46370604) open.
[2025-07-16T15:37:47Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-26b0d618-2ef8-4dcc-a01a-90be46370604'
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-26b0d618-2ef8-4dcc-a01a-90be46370604@b2b2c7fd-ac4b-4596-8413-a62580a1e723' and field mask: '[]'
[2025-07-16T15:37:47Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-26b0d618-2ef8-4dcc-a01a-90be46370604) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:47Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-26b0d618-2ef8-4dcc-a01a-90be46370604) has been closed.
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:47Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, execution_state: ExecutionState { state: Failed(Lost), additional_info: "" } }]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-eff34804-c4b7-4ba8-a58f-6ff49faa25c6) open.
[2025-07-16T15:37:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-eff34804-c4b7-4ba8-a58f-6ff49faa25c6'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-eff34804-c4b7-4ba8-a58f-6ff49faa25c6@09400b4f-211f-45ca-93bc-55715b5d649f' and field mask: '[]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-eff34804-c4b7-4ba8-a58f-6ff49faa25c6) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-eff34804-c4b7-4ba8-a58f-6ff49faa25c6) has been closed.
[2025-07-16T15:37:48Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello1", id: "5676c8c1df635eac92773965b4e8366bea6e7d1155b81229d936a795bab28618" }, execution_state: ExecutionState { state: Failed(Lost), additional_info: "" } }]'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/sleepy:latest\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cb53c283-0d3c-4e1b-a440-31cb267d6d94) open.
[2025-07-16T15:37:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-cb53c283-0d3c-4e1b-a440-31cb267d6d94'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-cb53c283-0d3c-4e1b-a440-31cb267d6d94@3a938bb2-014d-41c1-ba8a-4de0f9296e2f' and field mask: '[]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cb53c283-0d3c-4e1b-a440-31cb267d6d94) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cb53c283-0d3c-4e1b-a440-31cb267d6d94) has been closed.
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "sleepy", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d5a35fa8-cdb4-4832-860c-8f7d2514f633) open.
[2025-07-16T15:37:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d5a35fa8-cdb4-4832-860c-8f7d2514f633'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d5a35fa8-cdb4-4832-860c-8f7d2514f633@e3a3d3ff-2985-48eb-a394-827ff3198c54' and field mask: '[]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d5a35fa8-cdb4-4832-860c-8f7d2514f633) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d5a35fa8-cdb4-4832-860c-8f7d2514f633) has been closed.
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-5d27bce6-4ecc-4938-a3f0-6e52c9515f28) open.
[2025-07-16T15:37:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-5d27bce6-4ecc-4938-a3f0-6e52c9515f28'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-5d27bce6-4ecc-4938-a3f0-6e52c9515f28@9ff346d6-e5c9-4c18-8792-61af0d0d7ef1' and field mask: '[]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-5d27bce6-4ecc-4938-a3f0-6e52c9515f28) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-5d27bce6-4ecc-4938-a3f0-6e52c9515f28) has been closed.
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d2b7a5bb-55d0-4b8e-a0ab-ccf8c41c2549) open.
[2025-07-16T15:37:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d2b7a5bb-55d0-4b8e-a0ab-ccf8c41c2549'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d2b7a5bb-55d0-4b8e-a0ab-ccf8c41c2549@90e6e99b-a38b-47e1-a1f8-baf091e9aed8' and field mask: '[]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d2b7a5bb-55d0-4b8e-a0ab-ccf8c41c2549) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d2b7a5bb-55d0-4b8e-a0ab-ccf8c41c2549) has been closed.
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ab165595-baf4-446f-839b-49cbee0982a1) open.
[2025-07-16T15:37:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-ab165595-baf4-446f-839b-49cbee0982a1'
[2025-07-16T15:37:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-ab165595-baf4-446f-839b-49cbee0982a1@6478ac1b-d817-4c56-8845-4ebfcb922786' and field mask: '[]'
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ab165595-baf4-446f-839b-49cbee0982a1) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ab165595-baf4-446f-839b-49cbee0982a1) has been closed.
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-814934c1-0001-4ebb-9f96-e034f001302f) open.
[2025-07-16T15:37:49Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-814934c1-0001-4ebb-9f96-e034f001302f'
[2025-07-16T15:37:49Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-814934c1-0001-4ebb-9f96-e034f001302f@9da2eb73-ed43-4772-9ff4-c054f0666044' and field mask: '[]'
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-814934c1-0001-4ebb-9f96-e034f001302f) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-814934c1-0001-4ebb-9f96-e034f001302f) has been closed.
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fb2efaeb-bbf9-4d8d-91fb-61dd01981c36) open.
[2025-07-16T15:37:49Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-fb2efaeb-bbf9-4d8d-91fb-61dd01981c36'
[2025-07-16T15:37:49Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-fb2efaeb-bbf9-4d8d-91fb-61dd01981c36@476c6bdf-19d6-4eee-a7c6-02219d044389' and field mask: '[]'
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fb2efaeb-bbf9-4d8d-91fb-61dd01981c36) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fb2efaeb-bbf9-4d8d-91fb-61dd01981c36) has been closed.
[2025-07-16T15:37:49Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello2", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-32e0ed77-6875-4191-9b34-b041673a82a8) open.
[2025-07-16T15:37:49Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-32e0ed77-6875-4191-9b34-b041673a82a8'
[2025-07-16T15:37:49Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-32e0ed77-6875-4191-9b34-b041673a82a8@220348fe-79f5-443a-9179-8da0d17f9999' and field mask: '[]'
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-32e0ed77-6875-4191-9b34-b041673a82a8) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-32e0ed77-6875-4191-9b34-b041673a82a8) has been closed.
[2025-07-16T15:37:49Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "hello3", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ace9adce-263c-4b5a-87a3-4daf614d01c1) open.
[2025-07-16T15:37:49Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-ace9adce-263c-4b5a-87a3-4daf614d01c1'
[2025-07-16T15:37:49Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-ace9adce-263c-4b5a-87a3-4daf614d01c1@62db68e1-4d4e-44c0-a7d6-e2b8e211f026' and field mask: '[]'
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ace9adce-263c-4b5a-87a3-4daf614d01c1) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:37:49Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ace9adce-263c-4b5a-87a3-4daf614d01c1) has been closed.
