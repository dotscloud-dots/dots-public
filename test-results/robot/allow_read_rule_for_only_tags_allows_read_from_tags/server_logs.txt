[2025-07-16T15:52:33Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:52:33Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/tmp/tmpyvezaad0/startup_config.yaml'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'simple_existing' as no config is assigned to the workload
[2025-07-16T15:52:33Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'controller' as no config is assigned to the workload
[2025-07-16T15:52:33Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:52:33Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:52:33Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:52:33Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] No workload states to send.
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "cef19a53d1ff71e2e7f76ff8f1cb07fcff32d05376cc0eae64762b7df76b0ef1" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "commandOptions: [\"--mount=type=bind,source=/tmp/tmpyvezaad0,destination=/data/\", \"--restart=no\"]\nimage: dotscloud/tests-control_interface_tester:manual-build\ncommandArgs: [\"/data/commands.yaml\", \"/data/output.yaml\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [StateRule(StateRule { operation: Read, filter_mask: ["desiredState.workloads.*.tags"] })], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:52:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0da94759-b298-4d95-a183-b04bc4632c18) open.
[2025-07-16T15:52:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-0da94759-b298-4d95-a183-b04bc4632c18'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-0da94759-b298-4d95-a183-b04bc4632c18@cdeee86f-becc-4e57-86c9-f10be9ccf00b' and field mask: '[]'
[2025-07-16T15:52:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0da94759-b298-4d95-a183-b04bc4632c18) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0da94759-b298-4d95-a183-b04bc4632c18) has been closed.
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "cef19a53d1ff71e2e7f76ff8f1cb07fcff32d05376cc0eae64762b7df76b0ef1" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:52:33Z DEBUG grpc::to_server_proxy] Received Request from 'agent_A'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'agent_A@controller@id-1' and field mask: '["desiredState.workloads.simple_existing.tags"]'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server::server_state] Current state: Object { data: Mapping {"desiredState": Mapping {"apiVersion": String("v0.1"), "workloads": Mapping {"controller": Mapping {"agent": String("agent_A"), "restartPolicy": Number(0), "dependencies": Mapping {}, "tags": Sequence [], "runtime": String("podman"), "runtimeConfig": String("commandOptions: [\"--mount=type=bind,source=/tmp/tmpyvezaad0,destination=/data/\", \"--restart=no\"]\nimage: dotscloud/tests-control_interface_tester:manual-build\ncommandArgs: [\"/data/commands.yaml\", \"/data/output.yaml\"]\n"), "controlInterfaceAccess": Mapping {"allowRules": Sequence [Mapping {"accessRightsRuleEnum": Mapping {"stateRule": Mapping {"operation": Number(1), "filterMasks": Sequence [String("desiredState.workloads.*.tags")]}}}], "denyRules": Sequence []}, "configs": Mapping {}, "files": Mapping {"files": Sequence []}}, "simple_existing": Mapping {"agent": String("agent_A"), "restartPolicy": Number(0), "dependencies": Mapping {}, "tags": Sequence [], "runtime": String("podman"), "runtimeConfig": String("image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n"), "controlInterfaceAccess": Null, "configs": Mapping {}, "files": Mapping {"files": Sequence []}}}, "configs": Mapping {}}, "workloadStates": Mapping {"agent_A": Mapping {"simple_existing": Mapping {"3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e": Mapping {"additionalInfo": String("Triggered at runtime."), "pending": Number(2)}}, "controller": Mapping {"cef19a53d1ff71e2e7f76ff8f1cb07fcff32d05376cc0eae64762b7df76b0ef1": Mapping {"additionalInfo": String("Triggered at runtime."), "pending": Number(2)}}}}, "agents": Mapping {"agent_A": Mapping {"cpuUsage": Mapping {"cpuUsage": Number(80)}, "freeMemory": Mapping {"freeMemory": Number(1318318080)}}}} }
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "cef19a53d1ff71e2e7f76ff8f1cb07fcff32d05376cc0eae64762b7df76b0ef1" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:52:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-80b170d5-f588-4bfe-9df8-30c147ae973b) open.
[2025-07-16T15:52:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-80b170d5-f588-4bfe-9df8-30c147ae973b'
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-80b170d5-f588-4bfe-9df8-30c147ae973b@962117d7-e71a-4d4f-ad38-d95a20fb73a1' and field mask: '[]'
[2025-07-16T15:52:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-80b170d5-f588-4bfe-9df8-30c147ae973b) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-80b170d5-f588-4bfe-9df8-30c147ae973b) has been closed.
[2025-07-16T15:52:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-63224bf8-5b94-49d4-b29c-25f9fcf492bd) open.
[2025-07-16T15:52:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-63224bf8-5b94-49d4-b29c-25f9fcf492bd'
[2025-07-16T15:52:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-63224bf8-5b94-49d4-b29c-25f9fcf492bd@b0672fa8-6826-4e6d-b493-49b92d763b1f' and field mask: '[]'
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-63224bf8-5b94-49d4-b29c-25f9fcf492bd) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-63224bf8-5b94-49d4-b29c-25f9fcf492bd) has been closed.
[2025-07-16T15:52:34Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "cef19a53d1ff71e2e7f76ff8f1cb07fcff32d05376cc0eae64762b7df76b0ef1" }, execution_state: ExecutionState { state: Stopping(Stopping), additional_info: "stopped" } }]'
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4b91aa92-18ac-48cc-a4ba-dab38e213444) open.
[2025-07-16T15:52:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-4b91aa92-18ac-48cc-a4ba-dab38e213444'
[2025-07-16T15:52:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-4b91aa92-18ac-48cc-a4ba-dab38e213444@490d6e5a-4628-4fb2-a74d-f572240dd927' and field mask: '[]'
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4b91aa92-18ac-48cc-a4ba-dab38e213444) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4b91aa92-18ac-48cc-a4ba-dab38e213444) has been closed.
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-8e6873d8-dc10-4462-9020-712462a16197) open.
[2025-07-16T15:52:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-8e6873d8-dc10-4462-9020-712462a16197'
[2025-07-16T15:52:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-8e6873d8-dc10-4462-9020-712462a16197@fc022ecd-9429-42d5-85de-38c74be29375' and field mask: '[]'
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-8e6873d8-dc10-4462-9020-712462a16197) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-8e6873d8-dc10-4462-9020-712462a16197) has been closed.
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2574e9a2-57b2-40ca-b78e-7d6743b4ce53) open.
[2025-07-16T15:52:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-2574e9a2-57b2-40ca-b78e-7d6743b4ce53'
[2025-07-16T15:52:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-2574e9a2-57b2-40ca-b78e-7d6743b4ce53@10ac8b0a-4d15-4ef9-bae5-4b49279ced44' and field mask: '[]'
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2574e9a2-57b2-40ca-b78e-7d6743b4ce53) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2574e9a2-57b2-40ca-b78e-7d6743b4ce53) has been closed.
[2025-07-16T15:52:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-894c252d-c38a-411b-8ce1-6ba01eb70cd6) open.
[2025-07-16T15:52:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-894c252d-c38a-411b-8ce1-6ba01eb70cd6'
[2025-07-16T15:52:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-894c252d-c38a-411b-8ce1-6ba01eb70cd6@e631e280-a12b-4e4e-855d-2fdbc74f5252' and field mask: '[]'
[2025-07-16T15:52:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-894c252d-c38a-411b-8ce1-6ba01eb70cd6) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-894c252d-c38a-411b-8ce1-6ba01eb70cd6) has been closed.
[2025-07-16T15:52:35Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "cef19a53d1ff71e2e7f76ff8f1cb07fcff32d05376cc0eae64762b7df76b0ef1" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:52:35Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:52:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-101d0f47-37a8-4d13-bdd5-459d18bc6f57) open.
[2025-07-16T15:52:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-101d0f47-37a8-4d13-bdd5-459d18bc6f57'
[2025-07-16T15:52:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-101d0f47-37a8-4d13-bdd5-459d18bc6f57@b4c11987-80b8-4824-b0e6-91b27edcc1e8' and field mask: '[]'
[2025-07-16T15:52:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-101d0f47-37a8-4d13-bdd5-459d18bc6f57) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:52:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-101d0f47-37a8-4d13-bdd5-459d18bc6f57) has been closed.
