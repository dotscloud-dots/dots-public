[2025-07-16T15:38:33Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:38:33Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/manifest_with_workload_files.yaml'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'kube_workload_with_unsupported_files' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:38:33Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_binary_file' with config '{"bin_data": String("SGVsbG8sIFdvcmxkIQ==")}'
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:38:33Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_text_file' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:38:33Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:38:33Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:38:33Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:38:33Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:38:33Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "kube_workload_with_unsupported_files", id: "155bf4adf0a998007976a1c44bd91af97a5bced15f2b5e961597e1ca02312760" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sh\" ]\ncommandArgs: [ \"-c\", \"cat /hello\" ]\n", files: [File { mount_point: "/hello", file_content: BinaryData(Base64Data { base64_data: "SGVsbG8sIFdvcmxkIQ==" }) }], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_text_file", id: "f9fdda60c9fe305be59fa2e4d4941b9c261431271d58c297be246157343b552c" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"-p\", \"8087:80\" ]\n", files: [File { mount_point: "/etc/nginx/nginx.conf", file_content: Data(Data { data: "worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n" }) }], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2ed72793-f6ad-4a09-ba80-feaa30f1b8d1) open.
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-2ed72793-f6ad-4a09-ba80-feaa30f1b8d1'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-2ed72793-f6ad-4a09-ba80-feaa30f1b8d1@0df2d2ff-00dc-4ae1-9bc0-607f1ec5f2c3' and field mask: '[]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2ed72793-f6ad-4a09-ba80-feaa30f1b8d1) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2ed72793-f6ad-4a09-ba80-feaa30f1b8d1) has been closed.
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_text_file", id: "f9fdda60c9fe305be59fa2e4d4941b9c261431271d58c297be246157343b552c" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c6284195-ff72-48cb-8b37-95d26c7be679) open.
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-c6284195-ff72-48cb-8b37-95d26c7be679'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-c6284195-ff72-48cb-8b37-95d26c7be679@e1de1276-5076-43ca-8347-cac97f97db32' and field mask: '[]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c6284195-ff72-48cb-8b37-95d26c7be679) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-c6284195-ff72-48cb-8b37-95d26c7be679) has been closed.
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_text_file", id: "f9fdda60c9fe305be59fa2e4d4941b9c261431271d58c297be246157343b552c" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1a19c487-0436-41dd-89b4-ea10c2b6859c) open.
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-1a19c487-0436-41dd-89b4-ea10c2b6859c'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-1a19c487-0436-41dd-89b4-ea10c2b6859c@ba3c043c-42d4-44ce-bf94-fc5e5cd5c017' and field mask: '[]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1a19c487-0436-41dd-89b4-ea10c2b6859c) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1a19c487-0436-41dd-89b4-ea10c2b6859c) has been closed.
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-53b61310-3a73-47ce-8e44-f0d23172f71c) open.
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-53b61310-3a73-47ce-8e44-f0d23172f71c'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-53b61310-3a73-47ce-8e44-f0d23172f71c@b07e40a9-930b-49fb-9daf-7fc2cb4106b2' and field mask: '[]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-53b61310-3a73-47ce-8e44-f0d23172f71c) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-53b61310-3a73-47ce-8e44-f0d23172f71c) has been closed.
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2) open.
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2@a67351d9-1700-4f47-91d5-872aaa8e44d3' and field mask: '[]'
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2'
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received UpdateStateRequest from 'cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateState. State 'CompleteState { desired_state: State { api_version: "v0.1", workloads: {"workload_with_mounted_binary_file": StoredWorkloadSpec { agent: "", tags: [], dependencies: {}, restart_policy: Never, runtime: "", runtime_config: "", control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] }, configs: {}, files: [File { mount_point: "/hello", file_content: BinaryData(Base64Data { base64_data: "{{bin_data}}" }) }, File { mount_point: "/second/hello", file_content: BinaryData(Base64Data { base64_data: "{{bin_data}}" }) }] }}, configs: {} }, workload_states: WorkloadStatesMap({}), agents: AgentMap({}) }', update mask '["desiredState.workloads.workload_with_mounted_binary_file.files"]'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_binary_file' with config '{"bin_data": String("SGVsbG8sIFdvcmxkIQ==")}'
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:38:33Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_text_file' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:38:33Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'kube_workload_with_unsupported_files' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:38:33Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:38:33Z INFO  dotops::dots_server] The update has 1 new or updated workloads, 1 workloads to delete
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Send UpdateStateSuccess for request 'cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2@2d511ff0-144c-4d08-b2cb-db288a2a4553'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fe470b7f-d2ad-4423-8b42-d9fcc193c0f2) has been closed.
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0152d486-d86a-4892-838a-429be9cdc6c3) open.
[2025-07-16T15:38:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-0152d486-d86a-4892-838a-429be9cdc6c3'
[2025-07-16T15:38:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-0152d486-d86a-4892-838a-429be9cdc6c3@40a1c7fd-0dfa-44da-9624-6a1f28e39ebb' and field mask: '[]'
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0152d486-d86a-4892-838a-429be9cdc6c3) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0152d486-d86a-4892-838a-429be9cdc6c3) has been closed.
[2025-07-16T15:38:34Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e3e5e0fc-a338-4984-8158-a84e1023e18c) open.
[2025-07-16T15:38:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-e3e5e0fc-a338-4984-8158-a84e1023e18c'
[2025-07-16T15:38:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-e3e5e0fc-a338-4984-8158-a84e1023e18c@e07958ac-581c-4490-8e1b-ee89a7c61fee' and field mask: '[]'
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e3e5e0fc-a338-4984-8158-a84e1023e18c) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e3e5e0fc-a338-4984-8158-a84e1023e18c) has been closed.
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-48b0e2d8-1774-47bb-94d3-756d9ac68547) open.
[2025-07-16T15:38:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-48b0e2d8-1774-47bb-94d3-756d9ac68547'
[2025-07-16T15:38:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-48b0e2d8-1774-47bb-94d3-756d9ac68547@a21e6022-91e1-4ec7-9d68-c3d7c9e63d6e' and field mask: '[]'
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-48b0e2d8-1774-47bb-94d3-756d9ac68547) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-48b0e2d8-1774-47bb-94d3-756d9ac68547) has been closed.
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2cc39613-da54-44e2-93d2-287c0f79da49) open.
[2025-07-16T15:38:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-2cc39613-da54-44e2-93d2-287c0f79da49'
[2025-07-16T15:38:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-2cc39613-da54-44e2-93d2-287c0f79da49@02614be3-8d8b-4cb5-b362-fdd510665ea0' and field mask: '[]'
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2cc39613-da54-44e2-93d2-287c0f79da49) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-2cc39613-da54-44e2-93d2-287c0f79da49) has been closed.
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cf2f127f-b0f4-4952-9e9b-8bdad531b79b) open.
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-cf2f127f-b0f4-4952-9e9b-8bdad531b79b'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-cf2f127f-b0f4-4952-9e9b-8bdad531b79b@f74af684-77af-40f2-b17f-ab33580d9cf0' and field mask: '[]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cf2f127f-b0f4-4952-9e9b-8bdad531b79b) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cf2f127f-b0f4-4952-9e9b-8bdad531b79b) has been closed.
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3963a6ac-a59d-4eb0-8550-2f8cb8c04edd) open.
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-3963a6ac-a59d-4eb0-8550-2f8cb8c04edd'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-3963a6ac-a59d-4eb0-8550-2f8cb8c04edd@4dee7988-0705-4caa-acb2-63a31df9df6e' and field mask: '[]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3963a6ac-a59d-4eb0-8550-2f8cb8c04edd) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3963a6ac-a59d-4eb0-8550-2f8cb8c04edd) has been closed.
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-be38a2eb-ec56-4587-952e-e5d504624f9f) open.
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-be38a2eb-ec56-4587-952e-e5d504624f9f'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-be38a2eb-ec56-4587-952e-e5d504624f9f@4a9be245-734b-41d4-8a03-5b7f8fbae537' and field mask: '[]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-be38a2eb-ec56-4587-952e-e5d504624f9f) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-be38a2eb-ec56-4587-952e-e5d504624f9f) has been closed.
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f0290a92-ff9d-45ca-9242-7880732dea5a) open.
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-f0290a92-ff9d-45ca-9242-7880732dea5a'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-f0290a92-ff9d-45ca-9242-7880732dea5a@e68f007d-818b-4d88-9817-2a0fbf4f5f27' and field mask: '[]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f0290a92-ff9d-45ca-9242-7880732dea5a) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-f0290a92-ff9d-45ca-9242-7880732dea5a) has been closed.
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-52727ea0-6444-4a0f-a72c-248541f20535) open.
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-52727ea0-6444-4a0f-a72c-248541f20535'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-52727ea0-6444-4a0f-a72c-248541f20535@6db4ea66-3ff9-4075-b233-bee3f0a15fff' and field mask: '[]'
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-52727ea0-6444-4a0f-a72c-248541f20535'
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received UpdateStateRequest from 'cli-conn-52727ea0-6444-4a0f-a72c-248541f20535'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received UpdateState. State 'CompleteState { desired_state: State { api_version: "v0.1", workloads: {"workload_with_mounted_binary_file": StoredWorkloadSpec { agent: "", tags: [], dependencies: {}, restart_policy: Never, runtime: "", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sh\" ]\ncommandArgs: [ \"-c\", \"cat /hello && cat /second/hello\"]\n", control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] }, configs: {}, files: [] }}, configs: {} }, workload_states: WorkloadStatesMap({}), agents: AgentMap({}) }', update mask '["desiredState.workloads.workload_with_mounted_binary_file.runtimeConfig"]'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'kube_workload_with_unsupported_files' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:38:35Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:38:35Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_binary_file' with config '{"bin_data": String("SGVsbG8sIFdvcmxkIQ==")}'
[2025-07-16T15:38:35Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:38:35Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:38:35Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_text_file' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:38:35Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:38:35Z INFO  dotops::dots_server] The update has 1 new or updated workloads, 1 workloads to delete
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Send UpdateStateSuccess for request 'cli-conn-52727ea0-6444-4a0f-a72c-248541f20535@fc44f269-546e-4b5e-8492-bcd3b618bbb3'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-52727ea0-6444-4a0f-a72c-248541f20535) has been closed.
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "91953c90a3304c3300aa0a8b794d6b4a1f3a0e5bb6f4422212240af74365c367" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e1929090-3657-4089-8c3d-1b2095c0d2cc) open.
[2025-07-16T15:38:35Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-e1929090-3657-4089-8c3d-1b2095c0d2cc'
[2025-07-16T15:38:35Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-e1929090-3657-4089-8c3d-1b2095c0d2cc@1e16ae91-7d9b-488a-b4ec-07f926edc0b2' and field mask: '[]'
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e1929090-3657-4089-8c3d-1b2095c0d2cc) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:35Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e1929090-3657-4089-8c3d-1b2095c0d2cc) has been closed.
[2025-07-16T15:38:36Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "91953c90a3304c3300aa0a8b794d6b4a1f3a0e5bb6f4422212240af74365c367" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b053541f-67b3-42fe-af3a-5fa734c8f1ec) open.
[2025-07-16T15:38:36Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-b053541f-67b3-42fe-af3a-5fa734c8f1ec'
[2025-07-16T15:38:36Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-b053541f-67b3-42fe-af3a-5fa734c8f1ec@bf3fb4e6-4a31-4333-9c61-c4539adb8d72' and field mask: '[]'
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b053541f-67b3-42fe-af3a-5fa734c8f1ec) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b053541f-67b3-42fe-af3a-5fa734c8f1ec) has been closed.
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e683b99e-8c38-4b61-bffc-a7ae8f05d584) open.
[2025-07-16T15:38:36Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-e683b99e-8c38-4b61-bffc-a7ae8f05d584'
[2025-07-16T15:38:36Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-e683b99e-8c38-4b61-bffc-a7ae8f05d584@07f13d4b-4249-4c33-ad7a-72f99fd7106f' and field mask: '[]'
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e683b99e-8c38-4b61-bffc-a7ae8f05d584) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e683b99e-8c38-4b61-bffc-a7ae8f05d584) has been closed.
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-8b3537c9-9ac5-4a7f-be4f-3efaf5edc8a5) open.
[2025-07-16T15:38:36Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-8b3537c9-9ac5-4a7f-be4f-3efaf5edc8a5'
[2025-07-16T15:38:36Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-8b3537c9-9ac5-4a7f-be4f-3efaf5edc8a5@f0a71f51-f53b-478d-b1b7-758ce51eb363' and field mask: '[]'
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-8b3537c9-9ac5-4a7f-be4f-3efaf5edc8a5) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:36Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-8b3537c9-9ac5-4a7f-be4f-3efaf5edc8a5) has been closed.
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cdc63d7f-4e5d-4625-afca-18003d91ef4a) open.
[2025-07-16T15:38:37Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-cdc63d7f-4e5d-4625-afca-18003d91ef4a'
[2025-07-16T15:38:37Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-cdc63d7f-4e5d-4625-afca-18003d91ef4a@71b85c57-9637-4c7f-a860-542bd76c782f' and field mask: '[]'
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cdc63d7f-4e5d-4625-afca-18003d91ef4a) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-cdc63d7f-4e5d-4625-afca-18003d91ef4a) has been closed.
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d798a06f-3387-4104-a97a-fdb6579397eb) open.
[2025-07-16T15:38:37Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d798a06f-3387-4104-a97a-fdb6579397eb'
[2025-07-16T15:38:37Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d798a06f-3387-4104-a97a-fdb6579397eb@6d525050-331e-4018-b84d-3caa5e172160' and field mask: '[]'
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d798a06f-3387-4104-a97a-fdb6579397eb) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d798a06f-3387-4104-a97a-fdb6579397eb) has been closed.
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-efefacee-e4b9-4517-9759-2d31a1017ce4) open.
[2025-07-16T15:38:37Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-efefacee-e4b9-4517-9759-2d31a1017ce4'
[2025-07-16T15:38:37Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-efefacee-e4b9-4517-9759-2d31a1017ce4@0a73650a-bc28-4b86-a1d2-58f72c6e336f' and field mask: '[]'
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-efefacee-e4b9-4517-9759-2d31a1017ce4) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-efefacee-e4b9-4517-9759-2d31a1017ce4) has been closed.
[2025-07-16T15:38:37Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "91953c90a3304c3300aa0a8b794d6b4a1f3a0e5bb6f4422212240af74365c367" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-84461db1-37dd-4168-8199-538bd2872454) open.
[2025-07-16T15:38:37Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-84461db1-37dd-4168-8199-538bd2872454'
[2025-07-16T15:38:37Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-84461db1-37dd-4168-8199-538bd2872454@ffc96fd1-6e26-43de-9c01-5ea791db14c9' and field mask: '[]'
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-84461db1-37dd-4168-8199-538bd2872454) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:38:37Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-84461db1-37dd-4168-8199-538bd2872454) has been closed.
