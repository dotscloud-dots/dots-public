[2025-07-16T15:54:29Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:54:29Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/manifest_with_workload_files.yaml'
[2025-07-16T15:54:29Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_text_file' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:54:29Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:54:29Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_binary_file' with config '{"bin_data": String("SGVsbG8sIFdvcmxkIQ==")}'
[2025-07-16T15:54:29Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:54:29Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'kube_workload_with_unsupported_files' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:54:29Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:54:29Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:54:29Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:54:29Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:54:29Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:54:29Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "kube_workload_with_unsupported_files", id: "155bf4adf0a998007976a1c44bd91af97a5bced15f2b5e961597e1ca02312760" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sh\" ]\ncommandArgs: [ \"-c\", \"cat /hello\" ]\n", files: [File { mount_point: "/hello", file_content: BinaryData(Base64Data { base64_data: "SGVsbG8sIFdvcmxkIQ==" }) }], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_text_file", id: "f9fdda60c9fe305be59fa2e4d4941b9c261431271d58c297be246157343b552c" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"-p\", \"8087:80\" ]\n", files: [File { mount_point: "/etc/nginx/nginx.conf", file_content: Data(Data { data: "worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n" }) }], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:54:29Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ace07a2a-b145-4445-9325-94387bafd851) open.
[2025-07-16T15:54:29Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-ace07a2a-b145-4445-9325-94387bafd851'
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-ace07a2a-b145-4445-9325-94387bafd851@3e2adcd9-f183-493b-b76d-175f6655428c' and field mask: '[]'
[2025-07-16T15:54:29Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ace07a2a-b145-4445-9325-94387bafd851) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:29Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-ace07a2a-b145-4445-9325-94387bafd851) has been closed.
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_text_file", id: "f9fdda60c9fe305be59fa2e4d4941b9c261431271d58c297be246157343b552c" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:54:29Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-573f3e3a-5d67-4e54-ac65-42765fd4cefd) open.
[2025-07-16T15:54:29Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-573f3e3a-5d67-4e54-ac65-42765fd4cefd'
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-573f3e3a-5d67-4e54-ac65-42765fd4cefd@8b719d7a-121a-448f-b981-c9326669d5d6' and field mask: '[]'
[2025-07-16T15:54:29Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-573f3e3a-5d67-4e54-ac65-42765fd4cefd) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:29Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-573f3e3a-5d67-4e54-ac65-42765fd4cefd) has been closed.
[2025-07-16T15:54:29Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_text_file", id: "f9fdda60c9fe305be59fa2e4d4941b9c261431271d58c297be246157343b552c" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e6d225fc-5643-4b05-b80a-0ab7147a0ebe) open.
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-e6d225fc-5643-4b05-b80a-0ab7147a0ebe'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-e6d225fc-5643-4b05-b80a-0ab7147a0ebe@b7475ab2-0d1d-4e85-a68e-3f6edf26141b' and field mask: '[]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e6d225fc-5643-4b05-b80a-0ab7147a0ebe) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-e6d225fc-5643-4b05-b80a-0ab7147a0ebe) has been closed.
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-35c261bd-0156-4a30-ae01-007720130a2c) open.
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-35c261bd-0156-4a30-ae01-007720130a2c'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-35c261bd-0156-4a30-ae01-007720130a2c@674fcb94-690b-4e79-b254-e6df6520460f' and field mask: '[]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-35c261bd-0156-4a30-ae01-007720130a2c) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-35c261bd-0156-4a30-ae01-007720130a2c) has been closed.
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1) open.
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1@a9363a81-a502-4ff0-ac73-05ded8abb5f9' and field mask: '[]'
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1'
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received UpdateStateRequest from 'cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateState. State 'CompleteState { desired_state: State { api_version: "v0.1", workloads: {"workload_with_mounted_binary_file": StoredWorkloadSpec { agent: "", tags: [], dependencies: {}, restart_policy: Never, runtime: "", runtime_config: "", control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] }, configs: {}, files: [File { mount_point: "/hello", file_content: BinaryData(Base64Data { base64_data: "{{bin_data}}" }) }, File { mount_point: "/second/hello", file_content: BinaryData(Base64Data { base64_data: "{{bin_data}}" }) }] }}, configs: {} }, workload_states: WorkloadStatesMap({}), agents: AgentMap({}) }', update mask '["desiredState.workloads.workload_with_mounted_binary_file.files"]'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_text_file' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:54:30Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:54:30Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'kube_workload_with_unsupported_files' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:54:30Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:54:30Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_binary_file' with config '{"bin_data": String("SGVsbG8sIFdvcmxkIQ==")}'
[2025-07-16T15:54:30Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:54:30Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:54:30Z INFO  dotops::dots_server] The update has 1 new or updated workloads, 1 workloads to delete
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Send UpdateStateSuccess for request 'cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1@74c81f89-f028-4445-9235-12b61aff6bc7'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-72478e35-4517-45a4-b0f5-4bb3cb0517e1) has been closed.
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4434a937-68cc-4b12-959b-fe31bbd52206) open.
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-4434a937-68cc-4b12-959b-fe31bbd52206'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-4434a937-68cc-4b12-959b-fe31bbd52206@aaa3d69a-b086-43a6-ae5a-abc27bf73543' and field mask: '[]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4434a937-68cc-4b12-959b-fe31bbd52206) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-4434a937-68cc-4b12-959b-fe31bbd52206) has been closed.
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1e11e63c-6531-4a6d-8bf4-b9fa88ed7cf2) open.
[2025-07-16T15:54:30Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-1e11e63c-6531-4a6d-8bf4-b9fa88ed7cf2'
[2025-07-16T15:54:30Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-1e11e63c-6531-4a6d-8bf4-b9fa88ed7cf2@245acbba-cd91-4c1e-bb4d-9560d1bfa15d' and field mask: '[]'
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1e11e63c-6531-4a6d-8bf4-b9fa88ed7cf2) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:30Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1e11e63c-6531-4a6d-8bf4-b9fa88ed7cf2) has been closed.
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-496c2f1b-087c-493a-b757-a7dae2168853) open.
[2025-07-16T15:54:31Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-496c2f1b-087c-493a-b757-a7dae2168853'
[2025-07-16T15:54:31Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-496c2f1b-087c-493a-b757-a7dae2168853@69086d6e-60f4-43e9-bf19-6cbdf515a57b' and field mask: '[]'
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-496c2f1b-087c-493a-b757-a7dae2168853) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-496c2f1b-087c-493a-b757-a7dae2168853) has been closed.
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-455eaa95-f653-4e0b-bf03-bdfde69564ec) open.
[2025-07-16T15:54:31Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-455eaa95-f653-4e0b-bf03-bdfde69564ec'
[2025-07-16T15:54:31Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-455eaa95-f653-4e0b-bf03-bdfde69564ec@c80180e7-7c69-4c06-be8a-3318dec05c31' and field mask: '[]'
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-455eaa95-f653-4e0b-bf03-bdfde69564ec) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-455eaa95-f653-4e0b-bf03-bdfde69564ec) has been closed.
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-64550c9b-92b4-4c6e-9dff-8cba90442c77) open.
[2025-07-16T15:54:31Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-64550c9b-92b4-4c6e-9dff-8cba90442c77'
[2025-07-16T15:54:31Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-64550c9b-92b4-4c6e-9dff-8cba90442c77@65fc5849-1a14-4245-a10d-68293ab02b09' and field mask: '[]'
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-64550c9b-92b4-4c6e-9dff-8cba90442c77) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-64550c9b-92b4-4c6e-9dff-8cba90442c77) has been closed.
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b66c4f2b-3ad7-43ea-8a50-d8996d1968de) open.
[2025-07-16T15:54:31Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-b66c4f2b-3ad7-43ea-8a50-d8996d1968de'
[2025-07-16T15:54:31Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-b66c4f2b-3ad7-43ea-8a50-d8996d1968de@8ef37f26-b6be-4724-85e8-19f64ba3201b' and field mask: '[]'
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b66c4f2b-3ad7-43ea-8a50-d8996d1968de) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:31Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b66c4f2b-3ad7-43ea-8a50-d8996d1968de) has been closed.
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-bd2e1df5-fbb9-452e-9e61-4b16bee4519d) open.
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-bd2e1df5-fbb9-452e-9e61-4b16bee4519d'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-bd2e1df5-fbb9-452e-9e61-4b16bee4519d@c28ee9fb-5b91-4352-ac5d-1ba92b0a29a3' and field mask: '[]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-bd2e1df5-fbb9-452e-9e61-4b16bee4519d) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-bd2e1df5-fbb9-452e-9e61-4b16bee4519d) has been closed.
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3403e2f1-2eb7-4daf-9c70-0f04dac9ed93) open.
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-3403e2f1-2eb7-4daf-9c70-0f04dac9ed93'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-3403e2f1-2eb7-4daf-9c70-0f04dac9ed93@46c0a6bf-33cb-44e0-b291-47984eb3e9e9' and field mask: '[]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3403e2f1-2eb7-4daf-9c70-0f04dac9ed93) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3403e2f1-2eb7-4daf-9c70-0f04dac9ed93) has been closed.
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d) open.
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d@2b507106-6120-4fbd-8418-c644da781b89' and field mask: '[]'
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d'
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received UpdateStateRequest from 'cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received UpdateState. State 'CompleteState { desired_state: State { api_version: "v0.1", workloads: {"workload_with_mounted_binary_file": StoredWorkloadSpec { agent: "", tags: [], dependencies: {}, restart_policy: Never, runtime: "", runtime_config: "image: dotscloud/nginx:latest\ncommandOptions: [ \"--entrypoint\", \"/bin/sh\" ]\ncommandArgs: [ \"-c\", \"cat /hello && cat /second/hello\"]\n", control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] }, configs: {}, files: [] }}, configs: {} }, workload_states: WorkloadStatesMap({}), agents: AgentMap({}) }', update mask '["desiredState.workloads.workload_with_mounted_binary_file.runtimeConfig"]'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'kube_workload_with_unsupported_files' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:54:32Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:54:32Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_text_file' with config '{"nginx_conf": String("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        listen 80;\n        server_name custom_nginx;\n\n        location /custom {\n            default_type text/plain;\n            return 200 \"The mounted custom nginx.conf is being used!\\n\";\n        }\n    }\n}\n")}'
[2025-07-16T15:54:32Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("nginx_conf")], "nginx_conf")))
[2025-07-16T15:54:32Z DEBUG dotops::dots_server::config_renderer] Rendering workload 'workload_with_mounted_binary_file' with config '{"bin_data": String("SGVsbG8sIFdvcmxkIQ==")}'
[2025-07-16T15:54:32Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:54:32Z DEBUG handlebars::render] Rendering value: Path(Relative(([Named("bin_data")], "bin_data")))
[2025-07-16T15:54:32Z INFO  dotops::dots_server] The update has 1 new or updated workloads, 1 workloads to delete
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Send UpdateStateSuccess for request 'cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d@058d3a5e-a7d7-4dd6-9190-a15eb9eb245a'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-1e30587c-b65d-4a01-a840-fe88fefe3d6d) has been closed.
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Stopping(RequestedAtRuntime), additional_info: "" } }]'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "81784b25a56f5cb6c2bc3b0f4758b64a5381fd73dadeefb1fb0a9d7315756d77" }, execution_state: ExecutionState { state: Removed, additional_info: "" } }]'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "91953c90a3304c3300aa0a8b794d6b4a1f3a0e5bb6f4422212240af74365c367" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-048f6a7d-ef00-4da5-9d6c-4e11b8560abd) open.
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-048f6a7d-ef00-4da5-9d6c-4e11b8560abd'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-048f6a7d-ef00-4da5-9d6c-4e11b8560abd@8ac0fd28-c597-4360-925b-b39c305eaf9a' and field mask: '[]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-048f6a7d-ef00-4da5-9d6c-4e11b8560abd) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-048f6a7d-ef00-4da5-9d6c-4e11b8560abd) has been closed.
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "91953c90a3304c3300aa0a8b794d6b4a1f3a0e5bb6f4422212240af74365c367" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-6ea49b0b-4d45-48ed-a9b7-e348519d2b43) open.
[2025-07-16T15:54:32Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-6ea49b0b-4d45-48ed-a9b7-e348519d2b43'
[2025-07-16T15:54:32Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-6ea49b0b-4d45-48ed-a9b7-e348519d2b43@e5648d83-7d14-44b8-8697-57bd837e6fe6' and field mask: '[]'
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-6ea49b0b-4d45-48ed-a9b7-e348519d2b43) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:32Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-6ea49b0b-4d45-48ed-a9b7-e348519d2b43) has been closed.
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d8e4f029-e8e8-42e1-9245-e349ffed0576) open.
[2025-07-16T15:54:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-d8e4f029-e8e8-42e1-9245-e349ffed0576'
[2025-07-16T15:54:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-d8e4f029-e8e8-42e1-9245-e349ffed0576@8a4f0e82-2086-4aaa-84d2-222ba718afb6' and field mask: '[]'
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d8e4f029-e8e8-42e1-9245-e349ffed0576) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-d8e4f029-e8e8-42e1-9245-e349ffed0576) has been closed.
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0350723b-c3df-4444-af60-12f1f1529968) open.
[2025-07-16T15:54:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-0350723b-c3df-4444-af60-12f1f1529968'
[2025-07-16T15:54:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-0350723b-c3df-4444-af60-12f1f1529968@6a762fd1-cee7-4446-a8be-07cf781ff37a' and field mask: '[]'
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0350723b-c3df-4444-af60-12f1f1529968) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0350723b-c3df-4444-af60-12f1f1529968) has been closed.
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-39caea03-83e1-4a28-9fbe-9c18d911cd1a) open.
[2025-07-16T15:54:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-39caea03-83e1-4a28-9fbe-9c18d911cd1a'
[2025-07-16T15:54:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-39caea03-83e1-4a28-9fbe-9c18d911cd1a@a2eb714b-1a0f-4e6b-8dc8-f4fb5754bf09' and field mask: '[]'
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-39caea03-83e1-4a28-9fbe-9c18d911cd1a) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-39caea03-83e1-4a28-9fbe-9c18d911cd1a) has been closed.
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0e17613c-dbd7-4708-b133-c225cafc34b8) open.
[2025-07-16T15:54:33Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-0e17613c-dbd7-4708-b133-c225cafc34b8'
[2025-07-16T15:54:33Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-0e17613c-dbd7-4708-b133-c225cafc34b8@33c10ace-1993-4d39-b79f-1c0545cd7988' and field mask: '[]'
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0e17613c-dbd7-4708-b133-c225cafc34b8) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:33Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-0e17613c-dbd7-4708-b133-c225cafc34b8) has been closed.
[2025-07-16T15:54:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3a88b153-6cc0-4d28-b5f7-b8aa74ffe440) open.
[2025-07-16T15:54:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-3a88b153-6cc0-4d28-b5f7-b8aa74ffe440'
[2025-07-16T15:54:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-3a88b153-6cc0-4d28-b5f7-b8aa74ffe440@067f51a8-8b22-4c0a-8750-95d82c45bec6' and field mask: '[]'
[2025-07-16T15:54:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3a88b153-6cc0-4d28-b5f7-b8aa74ffe440) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-3a88b153-6cc0-4d28-b5f7-b8aa74ffe440) has been closed.
[2025-07-16T15:54:34Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_with_mounted_binary_file", id: "91953c90a3304c3300aa0a8b794d6b4a1f3a0e5bb6f4422212240af74365c367" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }]'
[2025-07-16T15:54:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-04355ee1-e663-44c2-af7a-a01c09420945) open.
[2025-07-16T15:54:34Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-04355ee1-e663-44c2-af7a-a01c09420945'
[2025-07-16T15:54:34Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-04355ee1-e663-44c2-af7a-a01c09420945@01c0cae3-51d9-41b2-8f92-0dc0da826ba4' and field mask: '[]'
[2025-07-16T15:54:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-04355ee1-e663-44c2-af7a-a01c09420945) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:54:34Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-04355ee1-e663-44c2-af7a-a01c09420945) has been closed.
