[2025-07-16T15:53:47Z DEBUG dotops] No config file found at default path '/etc/dots/dotctl-dotops.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:53:47Z DEBUG dotops] Starting the Dots dotops with 
    	dotops address: '127.0.0.1:25551', 
    	startup manifest path: '/__w/dot/dot/tests/resources/configs/default_config_with_dependencies.yaml'
[2025-07-16T15:53:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'workload_A' as no config is assigned to the workload
[2025-07-16T15:53:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'workload_B' as no config is assigned to the workload
[2025-07-16T15:53:47Z DEBUG dotops::dots_server::config_renderer] Skipping to render workload 'workload_D' as no config is assigned to the workload
[2025-07-16T15:53:47Z INFO  dotops::dots_server] Starting...
[2025-07-16T15:53:47Z DEBUG dotops::dots_server] Start listening to agents...
[2025-07-16T15:53:47Z WARN  grpc::server] !!!DOTOPS IS STARTED IN INSECURE MODE (-k, --insecure) -> TLS is disabled!!!
[2025-07-16T15:53:47Z INFO  grpc::from_server_proxy] Agent agent_B not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:53:47Z INFO  grpc::from_server_proxy] Agent agent_A not found, workloads not sent. Waiting for dot to connect.
[2025-07-16T15:53:47Z INFO  dotops::dots_server] Received AgentHello from 'agent_B'
[2025-07-16T15:53:47Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_B' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_D", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }, WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_A", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(Initial), additional_info: "" } }]'
[2025-07-16T15:53:47Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_B' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "workload_B", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {"workload_C": AddCondSucceeded}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:53:47Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fbfc7548-16d0-4a1d-aa79-946a0dd2f5cb) open.
[2025-07-16T15:53:47Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-fbfc7548-16d0-4a1d-aa79-946a0dd2f5cb'
[2025-07-16T15:53:47Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-fbfc7548-16d0-4a1d-aa79-946a0dd2f5cb@5005a3bc-ec3e-4883-854d-db83cd2e9675' and field mask: '[]'
[2025-07-16T15:53:47Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "workload_B", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:53:47Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fbfc7548-16d0-4a1d-aa79-946a0dd2f5cb) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: connection reset\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:47Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-fbfc7548-16d0-4a1d-aa79-946a0dd2f5cb) has been closed.
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b7b159a1-5a68-46c7-bb12-5534495f63f1) open.
[2025-07-16T15:53:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-b7b159a1-5a68-46c7-bb12-5534495f63f1'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-b7b159a1-5a68-46c7-bb12-5534495f63f1@41b13bfa-6c29-435c-83d8-9418da9df27b' and field mask: '[]'
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b7b159a1-5a68-46c7-bb12-5534495f63f1) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-b7b159a1-5a68-46c7-bb12-5534495f63f1) has been closed.
[2025-07-16T15:53:48Z INFO  dotops::dots_server] Received AgentHello from 'agent_A'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Sending initial UpdateWorkloadState to dot 'agent_A' with workload states: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_B", workload_name: "workload_B", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Sending initial ServerHello to dot 'agent_A' with added workloads: '[WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_D", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_A", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, tags: [Tag { key: "owner", value: "Dots team" }], dependencies: {"workload_B": AddCondSucceeded}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/sleepy:latest\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]'
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-efeb9d4b-efa6-47dd-badc-31a94fdb8420) open.
[2025-07-16T15:53:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-efeb9d4b-efa6-47dd-badc-31a94fdb8420'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-efeb9d4b-efa6-47dd-badc-31a94fdb8420@0cf45b48-2ffb-4626-aee5-8857a6a9f90c' and field mask: '[]'
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-efeb9d4b-efa6-47dd-badc-31a94fdb8420) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-efeb9d4b-efa6-47dd-badc-31a94fdb8420) has been closed.
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_A", id: "7cde312752495ad045a9ba6700a3e2ca8a4ae479ebdc1b8e8114fec650e3c7cc" }, execution_state: ExecutionState { state: Pending(WaitingToStart), additional_info: "" } }]'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_D", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }]'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received UpdateWorkloadState: '[WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "workload_D", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }]'
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-74b50ecc-3100-494b-aea6-495dc99bdba4) open.
[2025-07-16T15:53:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-74b50ecc-3100-494b-aea6-495dc99bdba4'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-74b50ecc-3100-494b-aea6-495dc99bdba4@09d8badb-abe5-4ba9-9d54-49fbdfcd8783' and field mask: '[]'
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-74b50ecc-3100-494b-aea6-495dc99bdba4) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-74b50ecc-3100-494b-aea6-495dc99bdba4) has been closed.
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-145868f8-cb93-4bc1-8b91-7953c4d80bea) open.
[2025-07-16T15:53:48Z DEBUG grpc::to_server_proxy] Received Request from 'cli-conn-145868f8-cb93-4bc1-8b91-7953c4d80bea'
[2025-07-16T15:53:48Z DEBUG dotops::dots_server] Received CompleteStateRequest with id 'cli-conn-145868f8-cb93-4bc1-8b91-7953c4d80bea@0eb71a77-01b3-4248-a5e0-da409b635cf4' and field mask: '[]'
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-145868f8-cb93-4bc1-8b91-7953c4d80bea) failed with Err(ConnectionInterrupted("status: Unknown, message: \"h2 protocol error: error reading a body from connection: stream closed because of a broken pipe\", details: [], metadata: MetadataMap { headers: {} }")).
[2025-07-16T15:53:48Z DEBUG grpc::grpc_cli_connection] Connection to CLI (name=cli-conn-145868f8-cb93-4bc1-8b91-7953c4d80bea) has been closed.
