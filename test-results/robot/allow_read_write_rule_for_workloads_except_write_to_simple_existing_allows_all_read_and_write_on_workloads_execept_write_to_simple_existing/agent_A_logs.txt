[2025-07-16T15:36:43Z DEBUG dot] No config file found at default path '/etc/dots/dotctl-dot.conf'. Using cli arguments and environment variables only.
[2025-07-16T15:36:43Z DEBUG dot] Starting the Dots dot with 
    	name: 'agent_A', 
    	server url: 'https://127.0.0.1:25551', 
    	run directory: '/tmp/dots/'
[2025-07-16T15:36:43Z INFO  dot::agent_manager] Awaiting commands from the dotops ...
[2025-07-16T15:36:43Z DEBUG grpc::client] gRPC Communication Client starts.
[2025-07-16T15:36:43Z DEBUG dot::agent_manager] Process command received from dotops.
[2025-07-16T15:36:43Z DEBUG dot::agent_manager] Agent 'agent_A' received ServerHello:
    	Added workloads: [WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "commandOptions: [\"--mount=type=bind,source=/tmp/tmpaiuw4ml_,destination=/data/\", \"--restart=no\"]\nimage: dotscloud/tests-control_interface_tester:manual-build\ncommandArgs: [\"/data/commands.yaml\", \"/data/output.yaml\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [StateRule(StateRule { operation: ReadWrite, filter_mask: ["desiredState.workloads"] })], deny_rules: [StateRule(StateRule { operation: Write, filter_mask: ["desiredState.workloads.simple_existing"] })] } }, WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]
[2025-07-16T15:36:43Z INFO  dot::runtime_manager] Received the dotops hello with '2' added workloads.
[2025-07-16T15:36:43Z DEBUG dot::runtime_manager] Handling initial workload list.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::runtime_facade] Searching for reusable 'podman-kube' workloads on dot 'agent_A'.
[2025-07-16T15:36:43Z INFO  dot::runtime_manager] Found '0' existing 'podman-kube' workload(s).
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::runtime_facade] Searching for reusable 'podman' workloads on dot 'agent_A'.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman::podman_runtime] Found 0 reusable workload(s): '[]'
[2025-07-16T15:36:43Z INFO  dot::runtime_manager] Found '0' existing 'podman' workload(s).
[2025-07-16T15:36:43Z INFO  dot::runtime_manager] No control interface access specified for workload 'simple_existing'
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::runtime_facade] Skipping creation of control interface for workload 'simple_existing'.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::runtime_facade] Creating 'podman' workload 'simple_existing'.
[2025-07-16T15:36:43Z DEBUG dot::workload::workload_control_loop] Received WorkloadCommand::Create.
[2025-07-16T15:36:43Z INFO  dot::runtime_connectors::runtime_facade] Successfully created control interface for workload 'controller'.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::runtime_facade] Creating 'podman' workload 'controller'.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman_cli] Creating the workload 'simple_existing.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A' with image 'dotscloud/nginx:latest'
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman_cli] The args are: '["run", "--detach", "--name", "simple_existing.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A", "--label=name=simple_existing.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A", "--label=dot=agent_A", "dotscloud/nginx:latest", "echo", "Hello Dots"]'
[2025-07-16T15:36:43Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }'.
[2025-07-16T15:36:43Z DEBUG dot::workload::workload_control_loop] Received WorkloadCommand::Create.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman_cli] Creating the workload 'controller.155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51.agent_A' with image 'dotscloud/tests-control_interface_tester:manual-build'
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman_cli] The args are: '["run", "--detach", "--name", "controller.155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51.agent_A", "--mount=type=bind,source=/tmp/tmpaiuw4ml_,destination=/data/", "--restart=no", "--mount=type=bind,source=/tmp/dots/agent_A_io/controller.155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51/control_interface,destination=/run/dots/control_interface", "--label=name=controller.155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51.agent_A", "--label=dot=agent_A", "dotscloud/tests-control_interface_tester:manual-build", "/data/commands.yaml", "/data/output.yaml"]'
[2025-07-16T15:36:43Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }'.
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman::podman_runtime] The workload 'simple_existing.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A' has been created with internal id 'a8bfad597354d1dc7b60d86956f94b9b2a09e6a8899a63f3b7056ae7233e218f'
[2025-07-16T15:36:43Z DEBUG dot::runtime_connectors::podman::podman_runtime] Starting the checker for the workload 'simple_existing.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A' with internal id 'a8bfad597354d1dc7b60d86956f94b9b2a09e6a8899a63f3b7056ae7233e218f'
[2025-07-16T15:36:43Z INFO  dot::workload::workload_control_loop] Successfully created workload 'simple_existing'.
[2025-07-16T15:36:43Z WARN  dot::control_interface::control_interface_task] Received yet another Hello with protocol version '0.6.0-pre'
[2025-07-16T15:36:43Z DEBUG dot::control_interface::authorizer] Allow update mask 'desiredState.workloads.simple' of request 'id-1' as 'desiredState.workloads' is allowed
[2025-07-16T15:36:43Z DEBUG dot::control_interface::control_interface_task] Allowing request 'Request { request_id: "id-1", request_content: UpdateStateRequest(UpdateStateRequest { state: CompleteState { desired_state: State { api_version: "v0.1", workloads: {"simple": StoredWorkloadSpec { agent: "agent_A", tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] }, configs: {}, files: [] }}, configs: {} }, workload_states: WorkloadStatesMap({}), agents: AgentMap({}) }, update_mask: ["desiredState.workloads.simple"] }) }' from authorizer 'Authorizer { allow_write_state_rule: [], deny_write_state_rule: [Rule { patterns: [DenyPathPattern { sections: [String("desiredState"), String("workloads"), String("simple_existing")] }] }], allow_read_state_rule: [], deny_read_state_rule: [], allow_read_write_state_rule: [Rule { patterns: [AllowPathPattern { sections: [String("desiredState"), String("workloads")] }] }], deny_read_write_state_rule: [] }'
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::podman::podman_runtime] The workload 'controller.155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51.agent_A' has been created with internal id '0c80f3e4be8d1ab09a0b64bf7e16f5d3e9d2842327d5e8d7b6b2f6da7f691b3b'
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Process command received from dotops.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Agent 'agent_A' received UpdateWorkload:
    	Added workloads: [WorkloadSpec { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, tags: [], dependencies: {}, restart_policy: Never, runtime: "podman", runtime_config: "image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n", files: [], control_interface_access: ControlInterfaceAccess { allow_rules: [], deny_rules: [] } }]
    	Deleted workloads: []
[2025-07-16T15:36:44Z INFO  dot::runtime_manager] Received a new desired state with '1' added and '0' deleted workloads.
[2025-07-16T15:36:44Z INFO  dot::runtime_manager] No control interface access specified for workload 'simple'
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::runtime_facade] Skipping creation of control interface for workload 'simple'.
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::runtime_facade] Creating 'podman' workload 'simple'.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Process command received from dotops.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Agent 'agent_A' received Response: Response { request_id: "controller@id-1", response_content: Some(UpdateStateSuccess(UpdateStateSuccess { added_workloads: ["simple.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A"], deleted_workloads: [] })) }
[2025-07-16T15:36:44Z DEBUG dot::workload::workload_control_loop] Received WorkloadCommand::Create.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Pending(Starting), additional_info: "Triggered at runtime." } }'.
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::podman_cli] Creating the workload 'simple.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A' with image 'dotscloud/nginx:latest'
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::podman_cli] The args are: '["run", "--detach", "--name", "simple.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A", "--label=name=simple.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A", "--label=dot=agent_A", "dotscloud/nginx:latest", "echo", "Hello Dots"]'
[2025-07-16T15:36:44Z DEBUG dot::control_interface::authorizer] Allow field mask 'desiredState.workloads.simple_existing' of request 'id-2' as 'desiredState.workloads' is allowed
[2025-07-16T15:36:44Z DEBUG dot::control_interface::control_interface_task] Allowing request 'Request { request_id: "id-2", request_content: CompleteStateRequest(CompleteStateRequest { field_mask: ["desiredState.workloads.simple_existing"] }) }' from authorizer 'Authorizer { allow_write_state_rule: [], deny_write_state_rule: [Rule { patterns: [DenyPathPattern { sections: [String("desiredState"), String("workloads"), String("simple_existing")] }] }], allow_read_state_rule: [], deny_read_state_rule: [], allow_read_write_state_rule: [Rule { patterns: [AllowPathPattern { sections: [String("desiredState"), String("workloads")] }] }], deny_read_write_state_rule: [] }'
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Process command received from dotops.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Agent 'agent_A' received Response: Response { request_id: "controller@id-2", response_content: Some(CompleteState(CompleteState { desired_state: Some(State { api_version: "v0.1", workloads: Some(WorkloadMap { workloads: {"simple_existing": Workload { agent: Some("agent_A"), restart_policy: Some(Never), dependencies: Some(Dependencies { dependencies: {} }), tags: Some(Tags { tags: [] }), runtime: Some("podman"), runtime_config: Some("image: dotscloud/nginx:latest\ncommandArgs: [ \"echo\", \"Hello Dots\"]\n"), control_interface_access: None, configs: Some(ConfigMappings { configs: {} }), files: Some(Files { files: [] }) }} }), configs: None }), workload_states: None, agents: None })) }
[2025-07-16T15:36:44Z DEBUG dot::control_interface::authorizer] Allow field mask 'desiredState.workloads.simple_existing.tags' of request 'id-3' as 'desiredState.workloads' is allowed
[2025-07-16T15:36:44Z DEBUG dot::control_interface::control_interface_task] Allowing request 'Request { request_id: "id-3", request_content: CompleteStateRequest(CompleteStateRequest { field_mask: ["desiredState.workloads.simple_existing.tags"] }) }' from authorizer 'Authorizer { allow_write_state_rule: [], deny_write_state_rule: [Rule { patterns: [DenyPathPattern { sections: [String("desiredState"), String("workloads"), String("simple_existing")] }] }], allow_read_state_rule: [], deny_read_state_rule: [], allow_read_write_state_rule: [Rule { patterns: [AllowPathPattern { sections: [String("desiredState"), String("workloads")] }] }], deny_read_write_state_rule: [] }'
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Process command received from dotops.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Agent 'agent_A' received Response: Response { request_id: "controller@id-3", response_content: Some(CompleteState(CompleteState { desired_state: Some(State { api_version: "v0.1", workloads: Some(WorkloadMap { workloads: {"simple_existing": Workload { agent: None, restart_policy: None, dependencies: None, tags: Some(Tags { tags: [] }), runtime: None, runtime_config: None, control_interface_access: None, configs: None, files: None }} }), configs: None }), workload_states: None, agents: None })) }
[2025-07-16T15:36:44Z DEBUG dot::control_interface::reopen_file] Unexpected EOF
[2025-07-16T15:36:44Z DEBUG dot::generic_polling_state_checker] The workload simple_existing has changed its state to ExecutionState { state: Stopping(Stopping), additional_info: "stopped" }
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::podman::podman_runtime] Starting the checker for the workload 'controller.155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51.agent_A' with internal id '0c80f3e4be8d1ab09a0b64bf7e16f5d3e9d2842327d5e8d7b6b2f6da7f691b3b'
[2025-07-16T15:36:44Z INFO  dot::workload::workload_control_loop] Successfully created workload 'controller'.
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Stopping(Stopping), additional_info: "stopped" } }'.
[2025-07-16T15:36:44Z DEBUG dot::generic_polling_state_checker] The workload controller has changed its state to ExecutionState { state: Stopping(Stopping), additional_info: "stopped" }
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51" }, execution_state: ExecutionState { state: Stopping(Stopping), additional_info: "stopped" } }'.
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::podman::podman_runtime] The workload 'simple.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A' has been created with internal id '87ddb5d2a1c2039c2ab760e7b0c33e9e64b3d4b5e1b8f7d392012da8b7364fff'
[2025-07-16T15:36:44Z DEBUG dot::runtime_connectors::podman::podman_runtime] Starting the checker for the workload 'simple.3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e.agent_A' with internal id '87ddb5d2a1c2039c2ab760e7b0c33e9e64b3d4b5e1b8f7d392012da8b7364fff'
[2025-07-16T15:36:44Z INFO  dot::workload::workload_control_loop] Successfully created workload 'simple'.
[2025-07-16T15:36:44Z DEBUG dot::generic_polling_state_checker] The workload simple has changed its state to ExecutionState { state: Running(Ok), additional_info: "" }
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Running(Ok), additional_info: "" } }'.
[2025-07-16T15:36:44Z DEBUG dot::generic_polling_state_checker] The workload simple_existing has changed its state to ExecutionState { state: Succeeded(Ok), additional_info: "" }
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "simple_existing", id: "3d22c78f20862b31febceeda042aa21a11e808a8e573dfde49b9280d9592531e" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }'.
[2025-07-16T15:36:44Z DEBUG dot::generic_polling_state_checker] The workload controller has changed its state to ExecutionState { state: Succeeded(Ok), additional_info: "" }
[2025-07-16T15:36:44Z DEBUG dot::agent_manager] Storing and forwarding local workload state 'WorkloadState { instance_name: WorkloadInstanceName { agent_name: "agent_A", workload_name: "controller", id: "155a735f138e98b9ea2ff75cf78f5415986c2bab4037fde1e18264429c4abf51" }, execution_state: ExecutionState { state: Succeeded(Ok), additional_info: "" } }'.
[2025-07-16T15:36:44Z DEBUG grpc::client] Forward from dotops message from proto to Dots task completed
[2025-07-16T15:36:44Z WARN  grpc::client] Connection to dotops interrupted: 'Ok(())'
